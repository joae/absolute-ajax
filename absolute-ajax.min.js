/*!absolute-ajax
---------------
version 0.3.1
author: Leandro Cabrera (leaocabrera@gmail.com)
https://github.com/lean/
Licensed under the MIT license.
*/
!function(){"use strict";function t(){}function e(t,e){var n=new XDomainRequest,o=e.context,a=function(t,a,r){n.onload=n.onerror=n.ontimeout=function(){},n=void 0,t>=200&&300>t?e.success&&e.success(JSON.parse(r.text)):e.error&&e.error.call(o,t,a)};n.timeout=e.timeout,n.open(e.type,e.url),n.onprogress=function(){},n.ontimeout=function(){a(0,"timeout")},n.onerror=function(){a(404,"Not Found")},n.onload=function(){a(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},setTimeout(function(){n.send(e.data||null)},0)}function n(e,n){var o,r=new window.XMLHttpRequest,i=n.context,u=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol;if("string"==typeof e){var p=e;e={url:p}}if(n.url||(n.url=window.location),n.headers||(n.headers={}),"async"in n&&n.async===!1||(n.async=!0),n.processData&&a(n.data)&&(n.data=s(n.data)),"get"===n.type.toLowerCase()&&n.data&&(n.url+=-1===n.url.indexOf("?")?"?"+n.data:"&"+n.data),n.data&&(n.contentType||n.contentType===!1||(n.contentType="application/x-www-form-urlencoded; charset=UTF-8")),n.dataType)switch(n.dataType){case"script":n.dataType="text/javascript, application/javascript";break;case"json":n.dataType="application/json";break;case"xml":n.dataType="application/xml, text/xml";break;case"html":n.dataType="text/html";break;case"text":n.dataType="text/plain";break;default:n.dataType="text/html"}else n.dataType="text/html";null===n.crossDomain&&(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!==window.location.host),n.crossDomain||(n.headers=c({"X-Requested-With":"XMLHttpRequest"},n.headers)),r.onreadystatechange=function(){var t=n.dataType;if(4===r.readyState){clearTimeout(o);var e,a=!1,s=r.getResponseHeader("content-type")||"";if(r.status>=200&&r.status<300||0===r.status&&"file:"===u){if(s.indexOf("application/json")>=0||"application/json"===t&&!/^\s*$/.test(r.responseText))try{e=JSON.parse(r.responseText)}catch(c){a=c}else if(-1!==s.indexOf("javascript"))try{e=r.responseText}catch(c){console.error(c)}else e="application/xml, text/xml"===t?r.responseXML:"text/html"===t?r.responseText:r.responseText;0===r.status&&0===e.length&&(a=!0),a?n.error.call(i,r,"parsererror",a):n.success.call(i,e,"success",r)}else a=!0,n.error.call(i,r,"error");var p=a?"error":"success";n.complete.call(i,r,p)}},r.open(n.type,n.url,n.async),n.withCredentials&&(r.withCredentials=!0),n.contentType&&(n.headers["Content-Type"]=n.contentType);for(var l in n.headers)"string"==typeof n.headers[l]&&r.setRequestHeader(l,n.headers[l]);return n.timeout>0&&(o=setTimeout(function(){r.onreadystatechange=t,r.abort(),n.error.call(i,r,"timeout")},n.timeout)),r.send(n.data),r}var o,a=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},r=function(t){return"[object Function]"===toString.call(t)};"function"!=typeof/./&&"object"!=typeof Int8Array&&(r=function(t){return"function"==typeof t||!1});var s=function(t,e){var n=[];for(var s in t)if(!r(t[s])){var c=e?e+"["+s+"]":s,i=t[s];n.push(a(i)?o.param(i,c):c+"="+encodeURIComponent(i))}return n.join("&")},c=function(t){if(!a(t))return t;for(var e,n,o=1,r=arguments.length;r>o;o++){e=arguments[o];for(n in e)t[n]=e[n]}return t},i={type:"GET",success:t,error:t,complete:t,context:void 0,timeout:0,crossDomain:null,processData:!0},u=function(t){var o=t||{};for(var a in i)"undefined"==typeof o[a]&&(o[a]=i[a]);window.XDomainRequest?e(t,o):n(t,o)};window.abjax={ajax:u,get:function(t){t.type="GET",u(t)},post:function(t){t.type="POST",u(t)}}}();
