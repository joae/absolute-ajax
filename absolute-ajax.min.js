/*!absolute-ajax
---------------
version 0.3.0
author: Leandro Cabrera (leaocabrera@gmail.com)
https://github.com/lean/
Licensed under the MIT license.
*/
!function(){"use strict";function e(){}function t(e,t){var n=new XDomainRequest,a=t.context,o=function(e,o,r){n.onload=n.onerror=n.ontimeout=function(){},n=void 0,e>=200&&300>e?t.success&&t.success(JSON.parse(r.text)):t.error&&t.error.call(a,e,o)};n.timeout=t.timeout,n.open(t.type,t.url),n.onprogress=function(){},n.ontimeout=function(){o(0,"timeout")},n.onerror=function(){o(404,"Not Found")},n.onload=function(){o(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},setTimeout(function(){n.send(t.data||null)},0)}function n(t,n){var a,r,i=n.context,u=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol;if("string"==typeof t){var p=t;t={url:p}}if(n.url||(n.url=window.location),n.headers||(n.headers={}),"async"in n&&n.async===!1||(n.async=!0),n.processData&&o(n.data)&&(n.data=s(n.data)),"get"===n.type.toLowerCase()&&n.data&&(n.url+=-1===n.url.indexOf("?")?"?"+n.data:"&"+n.data),n.data&&(n.contentType||n.contentType===!1||(n.contentType="application/x-www-form-urlencoded; charset=UTF-8")),n.dataType)switch(n.dataType){case"script":n.dataType="text/javascript, application/javascript";break;case"json":n.dataType="application/json";break;case"xml":n.dataType="application/xml, text/xml";break;case"html":n.dataType="text/html";break;case"text":n.dataType="text/plain";break;default:n.dataType="text/html"}else n.dataType="text/html";null===n.crossDomain&&(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!==window.location.host),n.crossDomain||(n.headers=c({"X-Requested-With":"XMLHttpRequest"},n.headers)),a=new window.XMLHttpRequest,a.onreadystatechange=function(){var e=n.dataType;if(4===a.readyState){clearTimeout(r);var t,o=!1,s=a.getResponseHeader("content-type")||"";if(a.status>=200&&a.status<300||0===a.status&&"file:"===u){if(s.indexOf("application/json")>=0||"application/json"===e&&!/^\s*$/.test(a.responseText))try{t=JSON.parse(a.responseText)}catch(c){o=c}else if(-1!==s.indexOf("javascript"))try{t=a.responseText}catch(c){console.log(c)}else t="application/xml, text/xml"===e?a.responseXML:"text/html"===e?a.responseText:a.responseText;0===a.status&&0===t.length&&(o=!0),o?n.error.call(i,a,"parsererror",o):n.success.call(i,t,"success",a)}else o=!0,n.error.call(i,a,"error");var p=o?"error":"success";n.complete.call(i,a,p)}},a.open(n.type,n.url,n.async),n.withCredentials&&(a.withCredentials=!0),n.contentType&&(n.headers["Content-Type"]=n.contentType);for(var l in n.headers)"string"==typeof n.headers[l]&&a.setRequestHeader(l,n.headers[l]);return n.beforeSend.call(i,a,n)===!1?(a.abort(),!1):(n.timeout>0&&(r=setTimeout(function(){a.onreadystatechange=e,a.abort(),n.error.call(i,a,"timeout")},n.timeout)),a.send(n.data),a)}var a,o=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},r=function(e){return"[object Function]"===toString.call(e)};"function"!=typeof/./&&"object"!=typeof Int8Array&&(r=function(e){return"function"==typeof e||!1});var s=function(e,t){var n=[];for(var s in e)if(!r(e[s])){var c=t?t+"["+s+"]":s,i=e[s];n.push(o(i)?a.param(i,c):c+"="+encodeURIComponent(i))}return n.join("&")},c=function(e){if(!o(e))return e;for(var t,n,a=1,r=arguments.length;r>a;a++){t=arguments[a];for(n in t)e[n]=t[n]}return e},i={type:"GET",beforeSend:e,success:e,error:e,complete:e,context:void 0,timeout:0,crossDomain:null,processData:!0},u=function(e){var a=e||{};for(var o in i)"undefined"==typeof a[o]&&(a[o]=i[o]);window.XDomainRequest?t(e,a):n(e,a)};window.abjax={ajax:u}}();