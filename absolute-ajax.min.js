/*!absolute-ajax
---------------
version 0.2.0
author: Leandro Cabrera (leaocabrera@gmail.com)
https://github.com/lean/
Licensed under the MIT license.
*/
!function(){"use strict";function e(){}var t={},n=function(){},o=function(e){return"function"==typeof e},a=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},r=function(e){if(!a(e))return e;for(var t,n,o=1,r=arguments.length;r>o;o++){t=arguments[o];for(n in t)e[n]=t[n]}return e};t.param=function(e,n){var r=[];for(var s in e)if(!o(e[s])){var i=n?n+"["+s+"]":s,c=e[s];r.push(a(c)?t.param(c,i):i+"="+encodeURIComponent(c))}return r.join("&")},t.ajaxSettings={type:"GET",beforeSend:e,success:e,error:e,complete:e,context:void 0,timeout:0,crossDomain:null,processData:!0,cache:!1},t.ajax=function(o){var s,i=o||{};for(var c in t.ajaxSettings)"undefined"==typeof i[c]&&(i[c]=t.ajaxSettings[c]);try{if(i.url||(i.url=window.location),i.headers||(i.headers={}),"async"in i&&i.async===!1||(i.async=!0),i.processData&&a(i.data)&&(i.data=t.param(i.data)),"get"===i.type.toLowerCase()&&i.data&&(i.url+=-1===i.url.indexOf("?")?"?"+i.data:"&"+i.data),!i.cache){var u=String(Math.random()).split(".")[1];i.url+=i.url.indexOf("?")>=0?"&_="+u:"?&_=123"+u}i.data&&(i.contentType||i.contentType===!1||(i.contentType="application/x-www-form-urlencoded; charset=UTF-8")),i.dataType||(i.dataType="application/json"),null===i.crossDomain&&(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!==window.location.host),i.crossDomain||(i.headers=r({"X-Requested-With":"XMLHttpRequest"},i.headers));var p,d=i.context,l=/^([\w-]+:)\/\//.test(i.url)?RegExp.abjax1:window.location.protocol;if(s=new window.XMLHttpRequest,s.onreadystatechange=function(){var e=i.dataType;if(4===s.readyState){window.clearTimeout(p);var t,n=!1,o=s.getResponseHeader("content-type")||"";if(s.status>=200&&s.status<300||0===s.status&&"file:"===l){if("application/json"===o||"application/json"===e&&!/^\s*abjax/.test(s.responseText))try{t=JSON.parse(s.responseText)}catch(a){n=!0}else t=s.responseText;0===s.status&&0===t.length&&(n=!0),n?i.error.call(d,s,"parsererror",n):i.success.call(d,t,"success",s)}else n=!0,i.error.call(d,s,"error");var r=n?"error":"success";i.complete.call(d,s,r)}},i.withCredentials&&(s.withCredentials=!0),i.contentType&&(i.headers["Content-Type"]=i.contentType),i.beforeSend.call(d,s,i)===!1)return s.abort(),!1;if(i.timeout>0&&(p=window.setTimeout(function(){s.onreadystatechange=e,s.abort(),i.error.call(d,s,"timeout")},i.timeout)),window.XDomainRequest){var f=function(e,t,n){y.onload=y.onerror=y.ontimeout=function(){},y=void 0,i.success(JSON.parse(n.text))},y=new XDomainRequest;y.onload=function(){f(200,"OK",{text:y.responseText},"Content-Type: "+y.contentType)},y.onerror=function(){f(404,"Not Found")},y.onprogress=n,y.ontimeout=function(){f(0,"timeout")},y.timeout=i.timeout||Number.MAX_VALUE,y.open(i.type,i.url),y.send(i.hasContent&&i.data||null)}else{s.open(i.type,i.url,i.async);for(var m in i.headers)"string"==typeof i.headers[m]&&s.setRequestHeader(m,i.headers[m]);s.send(i.data)}}catch(w){i.error.call(d,s,"error",w)}},window.abjax=t}();